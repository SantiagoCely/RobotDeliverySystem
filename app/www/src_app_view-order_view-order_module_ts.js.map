{"version":3,"sources":["./src/app/view-order/view-order-routing.module.ts","./src/app/view-order/view-order.module.ts","./src/app/view-order/view-order.page.ts","./src/app/view-order/view-order.page.scss","./src/app/view-order/view-order.page.html"],"names":[],"mappings":"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","file":"src_app_view-order_view-order_module_ts.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ViewOrderPage } from './view-order.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ViewOrderPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ViewOrderPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ViewOrderPageRoutingModule } from './view-order-routing.module';\n\nimport { ViewOrderPage } from './view-order.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ViewOrderPageRoutingModule\n  ],\n  declarations: [ViewOrderPage]\n})\nexport class ViewOrderPageModule {}\n","import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { EventsService } from 'src/app/services/events.service';\nimport { CrudService } from 'src/app/services/crud.service';\n//import { Subscription } from 'rxjs';\n//import { Firestore, doc, onSnapshot, docSnapshots } from '@angular/fire/firestore';\nimport { CartService } from 'src/app/services/cart.service';\nimport { MenuItem } from 'src/app/interfaces/menu-item';\nimport { Order } from 'src/app/interfaces/order';\nimport { take } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-view-order',\n  templateUrl: './view-order.page.html',\n  styleUrls: ['./view-order.page.scss'],\n})\n\nexport class ViewOrderPage implements OnInit{\n  order: Order;\n  orderId : string;\n  total_ordered_quantity: number;\n  notSubmitted: MenuItem[] = []; // menu items not yet submitted, and thus not part of the Order yet\n  submitted: MenuItem[] = [];\n  //message: string;\n  //subscription: Subscription;\n  constructor(\n    //private afs: Firestore,\n    private crudService: CrudService,\n    //public events: EventsService,\n    public cart: CartService\n\n\n  //  private activatedRoute: ActivatedRoute,\n  //  private router: Router\n){ this.orderId = \"\"; }\n\n  displayLocalCart(){\n    this.notSubmitted = this.cart.getCartItems();\n    console.log(\"in cart\", this.notSubmitted);\n    console.log(\"total\", this.cart.getTotal());\n  }\n\n  displayOrder(){\n    if (this.total_ordered_quantity > 0){\n      this.order.items.forEach((item) => {\n        this.crudService.getMenuById(item).subscribe( item => {\n          this.submitted.push(item);\n        })\n      })\n    }\n  }\n  ngOnInit() {\n    console.log(\"View Order module\");\n    this.displayLocalCart();\n    this.displayOrder();\n    //this.subscription = this.events.currentMessage.subscribe(message => this.message = message);\n  }\n\n  submitOrder(){\n    //order cannot be empty\n    if (this.orderId = null){\n      this.crudService.createOrder(this.order).then(function(docRef){\n        this.order.id = docRef.id;\n        this.orderId = this.order.id; \n        console.log(\"Order created: \", this.order.id);\n      })\n    }\n\n    this.notSubmitted.forEach((item) => {\n      this.order.items.push(item.id);\n    })\n\n    this.order.total += this.cart.getTotal();\n    this.total_ordered_quantity += this.cart.getCartTotalQuantity();\n    this.cart.clearLocalCart();\n\n  }\n  pay(){\n\n  }\n\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJ2aWV3LW9yZGVyLnBhZ2Uuc2NzcyJ9 */\";","export default \"<ion-header>\\n  <ion-toolbar>\\n    <ion-title>view-order</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content>\\n  <ion-note>\\n    Items added to the order will be displayed here along with the statuses of the food items.\\n  </ion-note>\\n  <br><br>\\n  <ion-note h2> In Cart, not yet submitted: </ion-note>\\n  <ion-row  class=\\\"align-items-center\\\" *ngFor=\\\"let item of localCart; let i = index\\\">\\n    <div class=\\\"scrolling-wrapper\\\">\\n      <ion-card class=\\\"item-card\\\">\\n        <ion-card-header>{{item.name}}</ion-card-header><br>\\n        <ion-note>{{item.price}}</ion-note>\\n      </ion-card>\\n    </div>\\n  </ion-row>\\n\\n<br><br>\\n  <ion-button size=\\\"large\\\" (click)=submitOrder()>SEND ORDER</ion-button>\\n  <ion-note> Order number:  </ion-note>\\n  <ion-button size=\\\"large\\\" (click)=pay()>Pay</ion-button>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}